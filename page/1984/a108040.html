<table width="99%"><tr bgcolor="lightgrey"><td width="11%" align="center" title="Go to the Previous Page" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><span onclick="GetText('ShowPage', 'a108037', '', '');">Previous</span></td><td width="11%" align="center" title="Switch to 1977 Version of ANSI Standard" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><span onclick="document.form.Edition.value='1977';GetText('ShowPage', 'a108040', '', '');">1977</span></td><td width="11%" align="center" bgcolor="grey"><b><font size="+1" color="white">1984</font></b></td><td width="11%" align="center" title="Switch to 1990 Version of ANSI Standard" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><span onclick="document.form.Edition.value='1990';GetText('ShowPage', 'a108040', '', '');">1990</span></td><td width="11%" align="center" title="Switch to 1995 Version of ANSI (Equivalent to Current ISO Version) of Standard" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><span onclick="document.form.Edition.value='1995';GetText('ShowPage', 'a108040', '', '');">1995</span></td><td width="11%" align="center" title="Switch to Draft MDC Standard" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><span onclick="document.form.Edition.value='MDC';GetText('ShowPage', 'a108040', '', '');">MDC</span></td><td width="11%" align="center" title="Switch to Annotations" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><span onclick="document.form.Edition.value='notes';GetText('ShowPage', 'a108040', '', '');">notes</span></td><td width="11%" align="center" title="Switch to M[UMPS] by Example" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><span onclick="document.form.Edition.value='examples';GetText('ShowPage', 'a108040', '', '');">examples</span></td><td width="11%" align="center" title="Go to the Next Page" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><span onclick="GetText('ShowPage', 'a108042', '', '');">Next</span></td></tr></table><a name="Def_0001"></a>
<a name="Def_0002"></a>
<a name="Def_0003"></a>
<a name="Def_0004"></a>
<h3>3.6.11 LOCK</h3>

<table><tr>
<td align="center">L[OCK] <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108005', 'scroll', 'Def_0001');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>postcond</u></span></td>
<td align="center">&#9474;<br/>&#9474;<br/>&#9474;</td>
<td align="center">[ <img alt="Space" align="middle" src="/image/AnnoStd/space.gif"/> ]<br/>
<img alt="Space" align="middle" src="/image/AnnoStd/space.gif"/> <u>L</u> <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108040', 'scroll', 'Def_0005');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>lockargument</u></span></td>
<td align="center">&#9474;<br/>&#9474;<br/>&#9474;</td>
</tr></table>

<a name="Def_0005"></a>
<table><tr><td align="center">&nbsp;&nbsp;&nbsp;</td>
<td align="center"><span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108040', 'scroll', 'Def_0005');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>lockargument</u></span></td><td align="center">::=</td>
<td align="center">&#9474;<br/>&#9474;<br/>&#9474;<br/>&#9474;<br/>&#9474;<br/>&#9474;</td>
<td align="center"><table><tr>
<td align="center">&#9474;<br/>&#9474;<br/>&#9474;</td>
<td align="center"><span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108040', 'scroll', 'Def_0006');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>nref</u></span><br/>
( <u>L</u> <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108040', 'scroll', 'Def_0006');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>nref</u></span> )</td>
<td align="center">&#9474;<br/>&#9474;<br/>&#9474;</td>
<td align="center">[ <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108008', 'scroll', 'Def_0001');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>timeout</u></span> ]</td>
</tr></table><br/>
@ <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a107002', 'scroll', 'Def_0001');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>expratom</u></span> <u>V</u> <u>L</u> <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108040', 'scroll', 'Def_0005');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>lockargument</u></span> </td>
<td align="center">&#9474;<br/>&#9474;<br/>&#9474;<br/>&#9474;<br/>&#9474;<br/>&#9474;</td>
</tr></table>

<a name="Def_0006"></a>
<table><tr><td align="center">&nbsp;&nbsp;&nbsp;</td>
<td align="center"><span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108040', 'scroll', 'Def_0006');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>nref</u></span></td><td align="center">::=</td>
<td align="center">&#9474;<br/>&#9474;<br/>&#9474;</td>
<td align="center">[ ^ ] <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a106002', 'scroll', 'Def_0001');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>name</u></span> [ ( <u>L</u> <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a107001', 'scroll', 'Def_0001');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>expr</u></span> ) ]<br/>
@ <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a107002', 'scroll', 'Def_0001');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>expratom</u></span> <u>V</u> <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108040', 'scroll', 'Def_0006');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>nref</u></span></td>
<td align="center">&#9474;<br/>&#9474;<br/>&#9474;</td>
</tr></table>

<p>See also the transition diagram for <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a10t047', 'scroll', 'Def_0001');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>nref</u></span>.</p>

<p>LOCK provides a generalized interlock facility available to
concurrently executing MUMPS processes to be used as appropriate
to the applications being programmed. Execution of LOCK is not
affected by, nor does it directly affect, the state or value of
any global or local variable, or the value to the
<span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a107011', 'scroll', 'Def_0004');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;">naked indicator</span>.</p>

<p>Each <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108040', 'scroll', 'Def_0005');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>lockargument</u></span> specifies a subspace of the total
MUMPS name space for which the executing process seeks to make an
exclusive claim; the details of this subspace specification are
given below. Prior to evaluating and executing each
<span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108040', 'scroll', 'Def_0005');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>lockargument</u></span>, LOCK first unconditionally removes any prior
claim on any portion of the name space made by the process as the
result of a prior execution of LOCK. Then, if a
<span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108040', 'scroll', 'Def_0005');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>lockargument</u></span> is present, an attempt is made to claim the
entire subspace defined by the <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108040', 'scroll', 'Def_0005');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>lockargument</u></span>. If this
subspace does not intersect the union of all other subspaces
claimed at this instant by all other processes defined by the
implementor as sharing the interlock facility, the claim is
successfully established and execution proceeds to the next
<span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108040', 'scroll', 'Def_0005');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>lockargument</u></span> or command. If the subspace defined by the
<span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108040', 'scroll', 'Def_0005');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>lockargument</u></span> intersects any other claimed subspace,
execution of this process is suspended until all interfering
claims are removed by one or more other processes, or, when a
<span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108008', 'scroll', 'Def_0001');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>timeout</u></span> is present, until the <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108008', 'scroll', 'Def_0001');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>timeout</u></span> expires, if
that occurs first.</p>

<p>The subspace defined by one <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108040', 'scroll', 'Def_0005');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>lockargument</u></span> is claimed
effectively all at once or not at all; thus, the observance of
appropriate conventions on the use of the name space by all
concurrently executing processes can eliminate the possibility of
races and deadlocks.</p>

<p>If a <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108008', 'scroll', 'Def_0001');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>timeout</u></span> is present, the condition reported by
<span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a107074', 'scroll', 'Def_0001');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;">$T</span> upon resumption of execution is the
successful establishment of the claim. If no <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108008', 'scroll', 'Def_0001');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>timeout</u></span> is
present, execution of the <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108040', 'scroll', 'Def_0005');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>lockargument</u></span> does not change
<span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a107074', 'scroll', 'Def_0001');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;">$T</span>.</p>

<p>The subspace of the total name space defined by each
<span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108040', 'scroll', 'Def_0005');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>lockargument</u></span> is the union of the subspaces defined by
each of the name references <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108040', 'scroll', 'Def_0006');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>nref</u></span> in the
<span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108040', 'scroll', 'Def_0005');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>lockargument</u></span>. Each <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108040', 'scroll', 'Def_0006');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>nref</u></span> specifies its subspace as
follows.</p>

<ol type="a">
<li>If the occurrence of <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108040', 'scroll', 'Def_0006');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>nref</u></span> is unsubscripted, then the
subspace is the set of the following points: one point for the
unsubscripted variable name nref and one point for each
subscripted variable name N(s<sub>1</sub>, ..., s<sub>i</sub>)
for which N has the same spelling as <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108040', 'scroll', 'Def_0006');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>nref</u></span>.</li>

<li>If the occurrence of <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108040', 'scroll', 'Def_0006');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>nref</u></span> is subscripted, then the
subspace is the set of the following points: one point for the
spelling of <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a108040', 'scroll', 'Def_0006');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><u>nref</u></span> after all subscripts have been evaluated
and one point for each descendant of nref. (See KILL for a
definition of descendant.)</li>
</ol>

<p>See also the transition diagram for <span onclick="document.form.Edition.value='1984';GetText('ShowPage', 'a10t022', 'scroll', 'Def_0001');" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;">Lock</span>.</p>


<table width="99%"><tr bgcolor="lightgrey"><td width="11%" align="center" title="Go to the Previous Page" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><span onclick="GetText('ShowPage', 'a108037', '', '');">Previous</span></td><td width="11%" align="center" title="Switch to 1977 Version of ANSI Standard" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><span onclick="document.form.Edition.value='1977';GetText('ShowPage', 'a108040', '', '');">1977</span></td><td width="11%" align="center" bgcolor="grey"><b><font size="+1" color="white">1984</font></b></td><td width="11%" align="center" title="Switch to 1990 Version of ANSI Standard" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><span onclick="document.form.Edition.value='1990';GetText('ShowPage', 'a108040', '', '');">1990</span></td><td width="11%" align="center" title="Switch to 1995 Version of ANSI (Equivalent to Current ISO Version) of Standard" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><span onclick="document.form.Edition.value='1995';GetText('ShowPage', 'a108040', '', '');">1995</span></td><td width="11%" align="center" title="Switch to Draft MDC Standard" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><span onclick="document.form.Edition.value='MDC';GetText('ShowPage', 'a108040', '', '');">MDC</span></td><td width="11%" align="center" title="Switch to Annotations" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><span onclick="document.form.Edition.value='notes';GetText('ShowPage', 'a108040', '', '');">notes</span></td><td width="11%" align="center" title="Switch to M[UMPS] by Example" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><span onclick="document.form.Edition.value='examples';GetText('ShowPage', 'a108040', '', '');">examples</span></td><td width="11%" align="center" title="Go to the Next Page" onmouseover="HighLight(this, 1, 'lightblue');" onmouseout="HighLight(this, 0, '');" style="color: blue;"><span onclick="GetText('ShowPage', 'a108042', '', '');">Next</span></td></tr></table><p>Copyright &copy; Standard Documents; 1977-2025 MUMPS Development Committee;<br/>Copyright &copy; Examples: 1995-2025 Ed de Moel;<br/>Copyright &copy; Annotations: 2003-2008 Jacquard Systems Research<br/>Copyright &copy; Annotations: 2008-2025 Ed de Moel.</p><p align="center"><font size="-1">This page most recently updated on 15-Nov-2023, 14:45:36.</font></p><p>For comments, <a href="mailto:demoel@jacquardsystems.com?subject=Annotated%20Standards%2c%20page=a108040%2c%20edition=1984">contact Ed de Moel (demoel@jacquardsystems.com)</a></p>
